# HttpsFileServer 说明文档

HttpsFileServer 是一个基于 Python 的简易文件服务器，它支持通过 HTTPS 协议进行文件的浏览、上传（支持文件夹）、下载、删除和重命名操作，确保数据传输的安全性。该服务器还支持基本的 HTTP 认证，以及要求用户提供用户名和密码才能访问。

## 主要特性

### 多线程支持

- 服务器使用 `ThreadingMixIn` 类实现多线程处理，允许同时处理多个客户端请求，提高了服务器的响应能力和处理效率。

### HTTPS 支持

- 默认配置为 HTTPS 模式，使用 SSL/TLS 加密数据传输，保护数据免受中间人攻击和窃听。
- 服务器需要 SSL 证书和密钥文件来启动 HTTPS 服务。用户可以使用 OpenSSL 生成自签名证书或从证书颁发机构 (CA) 获取证书。

### 基本认证

- 服务器支持基本的 HTTP 认证机制，要求用户提供有效的用户名和密码才能访问服务器资源，增强了服务器的安全性。

### 文件管理功能

- **文件浏览**：用户可以浏览服务器上的文件和目录。
- **文件（夹）上传**：支持通过网页界面上传文件和文件夹。
- **文件下载**：用户可以下载服务器上的文件。
- **文件删除**：允许用户删除服务器上的文件或目录。
- **文件重命名**：支持对服务器上的文件或目录进行重命名操作。

## 使用说明

### 启动服务器

1. **准备 SSL 证书**：生成 SSL 证书和密钥，或使用已有的证书。
   ```bash
   openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes
   ```
2. **运行脚本**：使用 Python 运行 `HttpsFileServer.py`。
   ```bash
   python HttpsFileServer.py
   ```

### 命令行参数

- `-p`, `--port`：指定服务器监听的端口号，默认为 1234。
- `-u`, `--username`：设置基本认证的用户名。
- `-pw`, `--password`：设置基本认证的密码。

### 查看帮助

- 运行脚本时附加 `-h` 或 `--help` 参数，可以查看所有命令行参数的详细说明。
  ```bash
  python HttpsFileServer.py --help
  ```

## HTTP 模式切换

默认情况下，程序以 HTTPS 模式运行。如果需要在 HTTP 模式下运行，需要对源代码进行如下修改：

1. 注释掉： `import ssl  # 导入 SSL 模块，用于启用 HTTPS`
2. 注释掉：标记为 `# HTTPS 服务器` 相关的 `def run():` 部分代码
3. 取消注释：标记为 `# HTTP 服务器` 相关的 `def run():` 部分代码，以启动 HTTP 服务。

**注意**：HTTP 模式下的通信未加密，可能会暴露敏感信息，建议仅在安全的网络环境下使用。

## 安全建议

- 在生产环境中，建议使用由受信任的证书颁发机构 (CA) 签发的证书，而非自签名证书，以避免浏览器的安全警告。
- 不要在公共或不安全的网络上暴露写权限的目录，以防止恶意文件上传。
